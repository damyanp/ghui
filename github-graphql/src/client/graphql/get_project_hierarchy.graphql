query ProjectHierarchy($after: String) {
  organization(login: "llvm") {
    projectV2(number: 4) {
      items(first: 100, after: $after) {
        totalCount
        nodes {
          __typename
          id
          updatedAt
          epic: fieldValueByName(name: "Epic") {
            ...CustomField
          }
          content {
            __typename
            ... on DraftIssue {
              id
              title
              updatedAt
            }
            ... on Issue {
              id
              title
              updatedAt
              resourcePath
              repository {
                nameWithOwner
              }
              parent {
                id
              }
              subIssues(first: 100) {
                totalCount
                nodes {
                  id
                }
              }
            }
            ... on PullRequest {
              id
              title
              updatedAt
              resourcePath
              repository {
                nameWithOwner
              }
            }
          }
        }
        pageInfo {
          endCursor
          hasNextPage
        }
      }
    }
  }
}

fragment CustomField on ProjectV2ItemFieldValue {
  __typename
  ... on ProjectV2ItemFieldSingleSelectValue {
    optionId
  }
  ... on ProjectV2ItemFieldIterationValue {
    iterationId
  }
}
